"use strict";(self.webpackChunkSHEIN_W=self.webpackChunkSHEIN_W||[]).push([[49811],{845142:function(e,t,r){var o=r(794103),n=r(649811),i=r(660180),s=r(665640);const a={forgetPassword:"click_fpwordriskverify",forgetPhone:"click_fpwordriskverify",resetPhone:"click_fpwordriskverify",loginEmail:"click_loginriskverify",loginPhone:"click_loginriskverify",phoneCodeSend:"click_loginriskverify",signupEmail:"click_registerriskverify",signupPhone:"click_registerriskverify",quickRegister:"click_registerriskverify"},l=["JyRisk","JyRiskReg","JyRiskZTReg"];t.A=class{constructor(){(0,o.A)(this,"abtResult",{}),(0,o.A)(this,"isSupportGeetest",!0),(0,o.A)(this,"isShouldInit",!1),(0,o.A)(this,"info",{}),(0,o.A)(this,"challange",""),(0,o.A)(this,"verifyCb",[]),(0,o.A)(this,"gtInstance",null),(0,o.A)(this,"from",""),(0,o.A)(this,"isReInitStatus",!1),(0,o.A)(this,"isGtInstanceReady",!1),(0,o.A)(this,"errorTriggerTimes",0),(0,o.A)(this,"reInitTimes",0),(0,o.A)(this,"riskMaskValue",""),(0,o.A)(this,"isResetting",!1),(0,o.A)(this,"isSetXhrListen",!1),(0,o.A)(this,"chanllangeTimestap",0),(0,o.A)(this,"ajaxParams",""),(0,o.A)(this,"staticUrl",""),(0,o.A)(this,"fullpageJs","")}register(e,t=""){(0,n.A)({url:`/geetest/register?riskType=${t}`,timeout:2e4}).then((r=>{var o;const{status:n,data:i}=r;if(this.fullpageJs=(null==i?void 0:i.fullpage)||"",this.staticUrl=(null==i||null===(o=i.static_servers)||void 0===o?void 0:o[0])||"",this.info=i,this.isShouldInit=0==n,this.isShouldInit)return this.chanllangeTimestap=Date.now(),this.listenXhrComplete(),void this.fetchFullPageResource(e,!!t);this.isReInitStatus&&(this.isReInitStatus=!1),"function"==typeof e&&e({status:"pass"})})).catch((t=>{this.errorReport(t,t.statusText,"/geetest/register"),this.isReInitStatus||"function"==typeof e&&e({status:"error"})}))}listenXhrComplete(){if(this.isSetXhrListen)return;this.isSetXhrListen=!0;const e=XMLHttpRequest.prototype.open,t=this;XMLHttpRequest.prototype.open=function(){let r=arguments;this.addEventListener("load",(function(){/geetest\/ajax\.php$/.test(this.responseURL)&&t.sendGtVerifyResult(this.responseText),/geetest\/reset\.php$/.test(this.responseURL)&&(t.chanllangeTimestap=Date.now(),t.recallVerfy(),t.isResetting=!1)})),this.addEventListener("error",(function(e){const o=r&&r[1];o&&/geetest\/(ajax|get|refresh|reset)\.php$/.test(o)&&(t.errorReport(e,"network error",o),t.isGtInstanceReady||"function"==typeof t.initCb&&t.initCb())})),this.addEventListener("timeout",(function(e){const o=r&&r[1];o&&/geetest\/(ajax|get|refresh|reset)\.php$/.test(o)&&(t.errorReport(e,"timeout",o),t.isGtInstanceReady||"function"==typeof t.initCb&&t.initCb())})),/geetest\/ajax\.php$/.test(r[1])&&(t.isSendingAjaxPhP=!0),e.apply(this,r)};const r=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){!0===t.isSendingAjaxPhP&&(t.ajaxParams=arguments[0],t.isSendingAjaxPhP=!1),r.apply(this,arguments)}}sendGtVerifyResult(e){let t={};try{t=JSON.parse(e)}catch(e){}const r=t.data||{};this.riskMaskValue=r&&r.risk;let o=1;0===t.status&&"success"===r.result&&"fullpage"===r.sub_type&&(o=0);const n=a[this.from];if(!this.from)return;const i="undefined"!=typeof SaPageInfo?SaPageInfo:{start_time:Date.now()},s={verification_result:o,sessionid_shein:t.token||""};r.sub_type&&(s.sub_type=r.sub_type),r.score&&(s.score=r.score),r.result&&(s.success="success"===r.result?0:1);const l=Object.assign({},i,{activity_name:n,activity_param:s});sa("send",l)}async getGtAbtResult(e){if(!this.isSupportGeetest)return"function"==typeof e&&e({status:"not_support"});this.initCb=e;try{let t={JyRisk:{param:"on",poskeys:"JyRisk"},JyRiskReg:{param:"on",poskeys:"JyRiskReg"},JyRiskZTReg:{param:"on",poskeys:"JyRiskZTReg"}};if(this.setAbtResult(t),this.showInitGTinstance())return void this.register(e)}catch(e){this.abtResult={}}this.isShoudInitGt=!1,"function"==typeof e&&e({status:"error"})}setAbtResult(e){l.forEach((t=>{this.abtResult[t]=e[t]||{}}))}getItemResult(e){return!(this.abtResult[e]&&"off"===this.abtResult[e].param)&&this.isShouldInit}showInitGTinstance(){return!0}urlConversion(e){return e=e.replace(/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/i,"https://$2$3$4$5$6")}fetchFullPageResource(e){if(!this.isShouldInit||!this.isSupportGeetest)return;if(1==this.isGtInstanceReady)return void this.initGeetestInstance(e);this.staticUrl=this.urlConversion(this.staticUrl);const t=`${this.staticUrl}/${this.fullpageJs}`;(0,i.t)({label:"script",attrs:{async:!0,src:t}}).then((()=>{this.initGeetestInstance(e)})).catch((t=>{s.log("fullpage.js error ......"),s.log(t),this.errorReport(t,"fullpage.js load error",""),"function"==typeof e&&e({status:"error"})}))}initGeetestInstance(e){const t={...this.info,product:"bind",lang:(r=gbCommonInfo.appLanguage,"pt-br"===r?"pt":"he"===r?"iw":r),next_width:"300px",timeout:2e4,pure:!0};var r;try{const r=new window.Geetest(t);r.onReady((()=>{this.isGtInstanceReady=!0,this.gtInstance=r,"function"==typeof e&&e({status:"complete"}),this.verifyCb.length>0&&this.gtInstance.verify()})),r.onSuccess((()=>{const{geetest_challenge:e}=r.getValidate();setTimeout((()=>{this.verifyCb.forEach((t=>{t({status:"success",challenge:e,risk:this.riskMaskValue}),this.verifyCb.shift()}))}),0)})),r.onClose((()=>{this.verifyCb.forEach((e=>{e({status:"close"}),this.verifyCb.shift()}))})),r.onError((t=>{s.log("error sdk ....",t),this.errorReport(t,"sdk error",""),"function"==typeof e&&e({status:"error"}),this.verifyCb.forEach((e=>{e({status:"error"}),this.verifyCb.shift()}))}))}catch(t){this.errorReport(t.stack,"sdk init error",""),"function"==typeof e&&e({status:"error"})}}verify(e,t=""){var r;s.log("reInitTimes",this.reInitTimes),!this.isGtInstanceReady||this.reInitTimes>=4?e({status:"error"}):(this.from=t,"function"==typeof e&&this.verifyCb.push(e),null===(r=this.gtInstance)||void 0===r||r.verify())}verifyPromise(e,t=""){return new Promise((r=>{if(!this.getItemResult(e))return r({status:"abt-off"});this.verify((e=>{r(e)}),t)}))}recallVerfy(){this.isResetting&&this.verifyCb.length>0&&this.gtInstance.verify()}reset(){this.isResetting=!0,this.gtInstance.reset()}reInitGt(e){this.reInitTimes>5||(this.reInitTimes++,this.isReInitStatus=!0,this.getGtAbtResult(e))}errorReport(e,t,r){const o=e&&e.target?e.target:e;if("object"==typeof o&&("1021"==o.error_code||"1012"==o.error_code))return;this.errorTriggerTimes++;const{SA_REPORT_URL:n}="undefined"!=typeof gbCommonInfo&&gbCommonInfo.REPORT_URL||{};"undefined"!=typeof ErrorJs&&ErrorJs.sendError("error",n+"/unusual",{errorMark:"GeeTestBrowserError",errorType:t,errorInfo:JSON.stringify(o),errorPath:r,errrorTimes:this.errorTriggerTimes})}}},112024:function(e,t,r){r.d(t,{A:function(){return g}});const o={"/api/cart/checkcart/get":{all:!0},"/api/cart/add/create":{all:!0},"/api/cart/add_mall/create":{all:!0},"/api/cart/update":{all:!0},"/api/cart/update_attr_mall/update":{all:!0},"/api/cart/delete":{all:!0},"/api/cart/batchDelete/update":{all:!0},"/cart/saveforlater":{all:!0},"/api/user/wishlist/add":{all:!0},"/api/cart/batchWishGoods/update":{all:!0},"/api/checkout/paymentList/get":{all:!1,excludes:["card_no","card_pin"]},"/api/checkout/shippingList/get":{all:!1,excludes:["card_no","card_pin"]},"/checkout/cacu_total":{all:!0},"/api/checkout/mallCacuTotal/get":{all:!0},"/api/checkout/order/update":{all:!1,includes:["editType"]},"/checkout/switch_payment":{all:!0},"/ltspc/pay/unPay/unifiedPay":{all:!1,includes:["billno","paymentCode","routeId"]},"/ltspc/pay/binCheck":{all:!0},"/ltspc/pay/preRouting":{all:!0},"ltspc/pay/unPay/complete":{all:!0}},n=[{path:/^\/user\/orders\/detail\/\w+/,all:!0}];var i=r(665640);const s=[];let a="";const l=[],u=[/^\/(api\/)?(cart|user|checkout|getCouponListForOrderStore|getCouponListForOrder|pay|ltspc)/],c=["language","theme"],d=[0,1e3,-1],{NODE_SERVER_ENV:p,langPath:f}=gbCommonInfo;var g=new class{isFilterRoute(e){const t=e&&e.url&&e.url.split("?")[0];return l.includes(t)}isIncluseRoutes(e){const t=e;return u.some((e=>e.test(t)))}isReportCode(e={},t){const r=e&&Object.prototype.hasOwnProperty.call(e,"code")?e.code:"undefined";return"undefined"===r?t&&200!=t.status:!d.includes(parseInt(r,10))}isFilterEnvs(){return s.includes(p)}isFilterArea(e){return c.includes(e)}transformResponse(e){let t={};try{e.responseType&&"json"==e.responseType?t=e.response||e.responseJson:e.responseText&&(t=JSON.parse(e.responseText))}catch(t){i.log(e),i.log(t)}return t}parseString(e){try{return JSON.stringify(e)}catch(e){return""}}formatReportParams(e,t={},r,o={}){return"object"==typeof t&&Object.keys(t).forEach((r=>{this.isFilterArea(r)||("object"==typeof t[r]?e[r]=this.parseString(t[r]):e[r]=t[r])})),e=this.addRequstParams(e,r,o)}parseRequestParams(e,t=""){if("[object Object]"==Object.prototype.toString.call(e))return e;let r=Object.create(null);if("[object String]"==Object.prototype.toString.call(e)){if(t.includes("application/json")){try{r=JSON.parse(e)}catch(e){}return r}if(!(e=e.trim().replace(/^(\?|#|&)/,"")))return r;e.split("&").forEach((function(e){let t=e.replace(/\+/g," ").split("="),o=t.shift(),n=t.length>0?t.join("="):void 0;if(o=decodeURIComponent(o),o.endsWith("[]")&&(o=o.slice(0,-2)),void 0===n)n=null;else try{n=decodeURIComponent(n)}catch(e){}void 0===r[o]?r[o]=n:Array.isArray(r[o])?r[o].push(n):r[o]=[r[o],n]}))}return r}getRequestData(e,t){return"GET"==t.type?e.apiSearch||"":t.data||null}getNeedParsePath(e){const{apiPath:t}=e;let r={};if(o[t])return r=o[t],{isNeed:!0,pathConfig:r};const i=n.find((e=>{const{path:r}=e;return!!new RegExp(r).test(t)}));return i?{isNeed:!0,pathConfig:i}:{isNeed:!1,pathConfig:r}}addRequstParams(e,t,r={}){var o,n;const i=this.getRequestData(e,r);if(!i)return e;const{isNeed:s,pathConfig:a}=this.getNeedParsePath(e);if(!s)return e;const l=(null===(o=r.headers)||void 0===o?void 0:o["Content-Type"])||(null===(n=r.headers)||void 0===n?void 0:n["content-type"])||"",u=this.parseRequestParams(i,l),{includes:c=[],excludes:d=[],all:p}=a;let f={};return p?(f=u,e.requestParams=JSON.stringify(f),e):c.length>0?(c.forEach((e=>{void 0!==u[e]&&(f[e]=u[e])})),e.requestParams=JSON.stringify(f),e):d.length>0?(Object.keys(u).forEach((e=>{d.includes(e)||(f[e]=u[e])})),e.requestParams=JSON.stringify(f),e):(e.requestParams=JSON.stringify(f),e)}formatApiPath(e){const t=e.indexOf("/ltspc");return t>=0?e.slice(t):e.replace(f,"")}getPublicParams(e,t){const r={};let[o="",n=""]=t.url&&t.url.split("?")||[];const i=document.createElement("a");return i.href=o,o=i.pathname,r.apiPath=this.formatApiPath(o),this.customParam({obj:r,xhr:e,opts:t}),r.apiSearch=n,r.userAgent=navigator&&navigator.userAgent||"",r.page_name=window.getSaPageInfo&&window.getSaPageInfo.page_name||window.SaPageInfo&&window.SaPageInfo.page_name||"",r.status_code=e.status,r.cookieSize=document&&document.cookie&&document.cookie.length,r.hrefSize=location&&location.href&&location.href.length,r}customParam({obj:e,opts:t}){if(e.apiPath.indexOf("/unifiedPay")>-1){let r=t.data.split("&");r=r.filter((e=>e.indexOf("paymentCode")>-1)),r=r[0]&&r[0].split("=")||[];const o=r[1]||"";e.payment_code=o}}sendReport(e,t={},r={}){try{if(this.isFilterEnvs())return;const e=this.transformResponse(t);if(!this.isReportCode(e,t))return;const o=this.getPublicParams(t,r);if(this.isFilterRoute(r))return;if(!this.isIncluseRoutes(o.apiPath))return;if("undefined"==typeof sa)return;this.formatReportParams(o,e,t,r),this.report(o)}catch(e){i.log(e)}}sendReportForScHttp(e){this.sendReport(null,null==e?void 0:e.request,null==e?void 0:e.config)}report(e){try{if("undefined"==typeof sa)return;if(!a){const{SA_REPORT_URL:e}=gbCommonInfo.REPORT_URL;a=`${e}/orgSsaUnusual`}window.sa("error",a,e)}catch(e){i.log(e)}}}},786721:function(e,t,r){r.d(t,{Vc:function(){return a},JY:function(){return l},Ay:function(){return s}});var o=r(887333),n=r(280030);var i=r(665640);if("undefined"!=typeof window){const{PUBLIC_CDN:e,SERVER_TYPE:t,NODE_SERVER_ENV:s,IS_RW:a,SiteUID:l,appLanguage:u,currency:c}=gbCommonInfo;r.p=`${e}/she_dist/assets/`,o.h.init({server_type:"usa"===t?"us":t,brand:a?"romwe":"shein",device_type:"pc",language:u,currency:c,env:"production"===s?"production":"debug",site_uid:l}),o.h.registerField({member_id:function(){if("undefined"==typeof window)return"";let e=(0,n.R)("memberId");try{if(e)return e;const t=localStorage.getItem("auth_member")||"null";return(JSON.parse(t)||{value:{}}).value.member_id||""}catch(e){return""}},device_id:()=>(0,n.R)("cookieId"),params(){var e;return{cid:(0,n.R)("cookieId")||"",server_from:"aidc-web-pc",page_name:(null===(e=window.SaPageInfo)||void 0===e?void 0:e.page_name)||"other"}}});const d={cache:{loop_time:5e3}};if("localhost"===s){const e="1"==sessionStorage.getItem("skynet_fetch"),t="1"==sessionStorage.getItem("skynet_log");e||(d.http={generator(){return e=>{var r;t&&i.log("@@@@@@@@@@@@@@@@@",e.url.replace(/.*\/app-track\//,""),null==e||null===(r=e.data)||void 0===r?void 0:r.data,"@@@@@@@@@@@@@@@@@")}}})}o.h.config(d),(e=>{const{ERROR_JS_SWITCH_OLD_ON:t}=gbCommonInfo;if(!e||1==t)return;const r=function(t){const r=t.tag||t.errorMark||t.type||t.errorType;e.SILogger.logInfo({tag:r,message:r,params:t})},o=function(t){const{metricName:r,...o}=t;e.SIMetric.metricCount({metric_name:r,tags:o})};if(window.ErrorJs){var n,i,s,a,l,u;if(null!==(n=window.ErrorJs)&&void 0!==n&&null!==(i=n.log_proxy)&&void 0!==i&&null!==(s=i.queues)&&void 0!==s&&s.length)for(;window.ErrorJs.log_proxy.queues.length;){const e=window.ErrorJs.log_proxy.queues.shift();r(e)}if(null!==(a=window.ErrorJs)&&void 0!==a&&null!==(l=a.monitor_proxy)&&void 0!==l&&null!==(u=l.queues)&&void 0!==u&&u.length)for(;window.ErrorJs.monitor_proxy.queues.length;){const e=window.ErrorJs.monitor_proxy.queues.shift();o(e)}window.ErrorJs.log_proxy=r,window.ErrorJs.monitor_proxy=o}else window.ErrorJs={sendError:function(e,t,n){if(t.indexOf("/unusual")>-1)return n.reportList&&n.reportList.forEach((function(e){e.metricName&&o(e)})),void r(n);window.sa&&(window.sa(e,t,n),r(Object.assign(n,{tag:"error-js-report-other"})))}}})(o.h),r.e(151).then(r.bind(r,529301))}var s=o.h;const a=o.h.SILogger,l=o.h.SIMetric},187564:function(e,t,r){r.d(t,{lt:function(){return h}});var o=r(845142),n=r(794103),i=r(649811),s=r(660180),a=r(665640);var l=class{constructor(){(0,n.A)(this,"isSupportGeetest",!0),(0,n.A)(this,"isShouldInit",!1),(0,n.A)(this,"info",{}),(0,n.A)(this,"challange",""),(0,n.A)(this,"verifyCb",[]),(0,n.A)(this,"gtInstance",null),(0,n.A)(this,"from",""),(0,n.A)(this,"isReInitStatus",!1),(0,n.A)(this,"isGtInstanceReady",!1),(0,n.A)(this,"errorTriggerTimes",0),(0,n.A)(this,"reInitTimes",0),(0,n.A)(this,"riskMaskValue",""),(0,n.A)(this,"isResetting",!1),(0,n.A)(this,"chanllangeTimestap",0),(0,n.A)(this,"ajaxParams",""),(0,n.A)(this,"staticUrl",""),(0,n.A)(this,"fullpageJs","")}register(e,t=""){(0,i.A)({url:"/risk/verify/identity/geetest/register",timeout:2e4,method:"POST",data:{validate_type:t}}).then((r=>{var o;const{code:n,info:i}=r;if(this.fullpageJs=(null==i?void 0:i.fullpage)||"",this.staticUrl=(null==i||null===(o=i.static_servers)||void 0===o?void 0:o[0])||"",this.info=i,this.isShouldInit=0==n,this.isShouldInit)return this.chanllangeTimestap=Date.now(),void this.fetchFullPageResource(e,!!t);this.isReInitStatus&&(this.isReInitStatus=!1),"function"==typeof e&&e({status:"pass"})})).catch((t=>{this.errorReport(t,t.statusText,"/geetest/register"),this.isReInitStatus||"function"==typeof e&&e({status:"error"})}))}showInitGTinstance(){return!0}urlConversion(e){return e=e.replace(/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/i,"https://$2$3$4$5$6")}fetchFullPageResource(e){if(!this.isShouldInit||!this.isSupportGeetest)return;if(1==this.isGtInstanceReady)return void this.initGeetestInstance(e);this.staticUrl=this.urlConversion(this.staticUrl);const t=`${this.staticUrl}/${this.fullpageJs}`;(0,s.t)({label:"script",attrs:{async:!0,src:t}}).then((()=>{this.initGeetestInstance(e)})).catch((t=>{a.log("fullpage.js error ......"),a.log(t),this.errorReport(t,"fullpage.js load error",""),"function"==typeof e&&e({status:"error"})}))}initGeetestInstance(e){const t={...this.info,product:"bind",lang:(r=gbCommonInfo.appLanguage,"pt-br"===r?"pt":"he"===r?"iw":r),next_width:"300px",timeout:2e4,pure:!0};var r;try{const r=new window.Geetest(t);r.onReady((()=>{this.isGtInstanceReady=!0,this.gtInstance=r,"function"==typeof e&&e({status:"complete"}),this.verifyCb.length>0&&this.gtInstance.verify()})),r.onSuccess((()=>{const{geetest_challenge:e}=r.getValidate();setTimeout((()=>{this.verifyCb.forEach((t=>{t({status:"success",challenge:e,risk:this.riskMaskValue}),this.verifyCb.shift()}))}),0)})),r.onClose((()=>{this.verifyCb.forEach((e=>{e({status:"close"}),this.verifyCb.shift()}))})),r.onError((t=>{a.log("error sdk ....",t),this.errorReport(t,"sdk error",""),"function"==typeof e&&e({status:"error"}),this.verifyCb.forEach((e=>{e({status:"error"}),this.verifyCb.shift()}))}))}catch(t){this.errorReport(t.stack,"sdk init error",""),"function"==typeof e&&e({status:"error"})}}verify(e,t=""){var r;a.log("reInitTimes",this.reInitTimes),!this.isGtInstanceReady||this.reInitTimes>=4?e({status:"error"}):(this.from=t,"function"==typeof e&&this.verifyCb.push(e),null===(r=this.gtInstance)||void 0===r||r.verify())}verifyPromise(e,t=""){return new Promise((e=>{this.verify((t=>{e(t)}),t)}))}recallVerfy(){this.isResetting&&this.verifyCb.length>0&&this.gtInstance.verify()}reset(){this.isResetting=!0,this.gtInstance.reset()}reInitGt(){this.reInitTimes>5||(this.reInitTimes++,this.isReInitStatus=!0)}errorReport(e,t,r){const o=e&&e.target?e.target:e;if("object"==typeof o&&("1021"==o.error_code||"1012"==o.error_code))return;this.errorTriggerTimes++;const{SA_REPORT_URL:n}="undefined"!=typeof gbCommonInfo&&gbCommonInfo.REPORT_URL||{};"undefined"!=typeof ErrorJs&&ErrorJs.sendError("error",n+"/unusual",{errorMark:"GeeTestBrowserError",errorType:t,errorInfo:JSON.stringify(o),errorPath:r,errrorTimes:this.errorTriggerTimes})}},u=r(121114),c=r(646315),d=r(941935),p=r(665640);const f="_f_c_llbs_";async function g(e){const t=1==window.GB_RISK_CHALLEGE_LIMIT?new l:new o.A,r=(1==window.GB_RISK_CHALLEGE_LIMIT?{901:"gee_slide",902:"gee_click"}:{901:"slide",902:"icon"})[e]||"";if(!r){return{status:"geetest_error",msg:"captcha_type not support"}}const n=await function(e,t){return new Promise((r=>{t.register(r,e)}))}(r,t),{status:i}=n;if("error"==i){return{status:"geetest_error",msg:"geetest init error"}}const{status:s,challenge:a,risk:u}=await t.verifyPromise("","flow_challenge");if("close"==s){return{status:"geetest_close",msg:""}}if("error"==s){return{status:"geetest_error",msg:"geetest request error"}}return{status:"success",challenge:a,risk:u}}async function h(e,t){let r={},o="";if(![901,902,903,904,905].includes(Number(e)))return{status:"error",challenge:"",risk:""};try{const{"risk-id":e}=(0,d.J)(location.search);if(e){var n,s,a,l,h,m,v,_;null===(n=window)||void 0===n||n.sa("set","setPageData",window.SaPageInfo);const t=(null===(s=window)||void 0===s||null===(a=s.AntiIn)||void 0===a?void 0:a.syncGetAllEncrypted(null===(l=window)||void 0===l?void 0:l.AntiIn.Channel.PC))||null,r=encodeURIComponent(location.href),o=(null===(h=window)||void 0===h?void 0:h.__ArmorToken)||(null===(m=window)||void 0===m?void 0:m.sessionStorage.getItem("armorToken"))||(null===(v=window)||void 0===v?void 0:v.localStorage.getItem("armorToken"))||null;null===(_=window)||void 0===_||_.sa("send",{activity_name:"expose_risk_envinfo",activity_param:{origin_risk_id:e,anti_in:t,armortoken:o,risk_url:r}})}}catch(e){p.log("error",e)}switch(Number(e)){case 901:case 902:o="anti_crawler_gee",r=await g(e);break;default:o="anti_crawler_RT",r=await async function(e){c.default.init({axiosInstance:i.A,rate:5e3});const t={validate_type:{903:"js_challenge",904:"gee_slide",905:"gee_click"}[e],validate_scene:"anti_crawler_RT",validate_channel:0};return new Promise((e=>{c.default.doVerify(t,(t=>{var r;const{isSuccess:o}=t;e({status:o?"success":"error",challenge:"",risk:"",validate_token:(null==t||null===(r=t.info)||void 0===r?void 0:r.validate_token)||""})})).catch((t=>{e({status:"error",challenge:"",risk:""})}))}))}(e)}const{status:y,challenge:I,risk:w,validate_token:b}=r;if("success"!=y)return r;const R={challenge:I,captcha_type:e,gRisk:w,validate_scene:o,validate_token:b||""},C=await(0,i.A)({url:"/api/risk/flow_check",method:"POST",data:R}).catch((e=>e)),k={status:0==C.status?"success":"risk_error",code:C.status,llbs:C.llbs||""};if(0==C.status){const e=parseInt(t)||0;(0,u.T)({key:f,value:C.llbs,end:2*e})}return k}},649811:function(e,t,r){r.d(t,{A:function(){return d},u:function(){return p}});var o=r(324792),n=r(582801),i=r(79321),s=r(156519),a=r(280030);const l=[["s","search"],["r","recommend"],["u","userGrowth"]],u=e=>{const t={},r=(()=>{const e=(0,a.R)("uswitch");let t;if(e){const r=decodeURIComponent(e).split(".").map((e=>e.split("-")));t=l.reduce(((e,t)=>{const o=r.find((([e,r])=>e===t[0]&&0==r));return e[t[1]]=o?0:1,e}),{})}return t})();return r&&Object.keys(r).length&&(t["uberctx-personal-switch"]=encodeURIComponent(JSON.stringify(r))),e.headers=Object.assign(t,e.headers),e},c=(()=>{if("undefined"==typeof window)return o.A;const e=o.A.create({baseURL:gbCommonInfo.langPath,headers:{common:{"x-csrf-token":gbCommonInfo.csrf_token,"x-requested-with":"XMLHttpRequest"}},params:{_ver:"1.1.8",_lang:gbCommonInfo.appLanguage}});return e.updateXCsrfToken=async t=>{if(!t){const r=await e({url:"/api/common/csrf/update"}).catch((()=>({})));if(!r.updateCs)return!1;t=r.updateCs}return e.defaults.headers.common["x-csrf-token"]=t,gbCommonInfo.csrf_token=t,t},e.interceptors.request.use(i.S4),e.interceptors.request.use(i.Qo.hold),e.interceptors.request.use(i.IT.startRootSpan),e.interceptors.request.use(i.NI),e.interceptors.request.use(i.D7),e.interceptors.request.use(u),e.interceptors.response.use(i.X2.success,i.X2.error),e.interceptors.response.use(i.Gm),e.interceptors.response.use(i.Qo.replay(e)),e.interceptors.response.use(i.t0),e.interceptors.response.use(i.Zw),e.interceptors.response.use(i.IT.success,i.IT.error),e.interceptors.response.use(i.ug),e.interceptors.response.use((e=>(n.A.httpIntercept(e.headers),e))),e.interceptors.response.use((e=>{var t;return null!==(t=e.config.schttp)&&void 0!==t&&t.getResponse?e:e.data}),(e=>{var t,r;throw null!==(t=e.config)&&void 0!==t&&null!==(r=t.schttp)&&void 0!==r&&r.getResponse||!e.request?e:e.request})),window.schttp=e,e})();var d=c;function p(){c({url:"/api/config/sampleControlConfig/get",method:"post"}).then((({code:e,info:t})=>{0===Number(e)&&(0,s.setLocalStorage)({key:"sky_eye_sample_control_config",value:t.skyEyeConfig||{},expire:36e5})}))}},79321:function(e,t,r){r.d(t,{o0:function(){return m},X2:function(){return C},S4:function(){return y},Gm:function(){return I},Zw:function(){return b},NI:function(){return v},D7:function(){return T},t0:function(){return R},ug:function(){return P},Qo:function(){return E},IT:function(){return A}});var o=r(794103),n=r(112024),i=r(542520);const s={5501:"10011000",5502:"10011001",5503:"10011002",5510:"10011003",5511:"10011004",5512:"10011005",5520:"10011006"};var a=r(187564),l=r(98544),u=r.n(l),c=r(156519),d=r(649811),p=r(786721);const f=["/api/abt/userinfo/query","/api/common/language/get","/api/robot/match/query","/api/robot/dialog/get","/api/robot/match/multi/query","/api/robot/channel/check/query","/api/robot/chat/template/query","/api/robot/zdtk/template/query","/api/robot/theme/get","/api/robot/chat/check/query","/api/robot/gwotk/tax/create","/api/robot/gwotk/dulyDeliver/create","/api/robot/cstk/create","/api/robot/gwotk/create","/api/robot/gwotk/quality/create","/api/robot/cschat/token/get","/api/robot/cschat/end/delete","/api/robot/cschat/conversation/create","/api/robot/cschat/message/create","/api/robot/cschat/evaluation/create","/api/robot/cschat/messageReport/create","/api/productList/info/get","/api/cart/checkcart/get","/api/cart/getSaveForLater/get","/api/cart/getCartCoupons/get","/api/cart/getCartSumQuantity/get","/api/cart/getDetainment/get","/api/cart/update","/api/cart/delete","/api/cart/checkStock/get","/api/cart/getIntegrityPromotionInfo/get","/api/cart/batchDelete/update","/api/cart/batchWishGoods/update","/api/cart/modifyCartCheckStatus/update","/api/cart/add_mall/create","/api/cart/batch_add_mall/create","/api/cart/update_attr_mall/update","/api/cart/pageLogo/get","/api/cart/communalNoticeCart/get","/api/cart/getPromotionById/get","/api/cart/getAddBuyProductList/get","/api/cart/getGiftProductList/get","/api/cart/postFreeMall/get","/api/cart/postSimpleFreeMall/get","/api/cart/getCartBriefInfo/get","/api/cart/postSpuProductsCart/get","/api/cart/getCartAllInfo/get","/api/cart/getIncludeTaxInfo/get","/api/cart/queryLatestUnPaidOrderInfo/get","/api/cart/getDefaultAddress/get","/api/checkout/get","/api/checkout/mallOrder/create","/api/pay/unifiedPay/create","/result/unifiedCb","/pay/result/success","/pay/result/fail","/api/giftcard/checkout/order/create","/api/user/dashboard/base/get","/api/productList/urlByCode/get","/api/user/addressbook/addressCheckRule/get","/api/user/addressbook/countrySensitiveList/query","/api/user/addressbook/storeConfigInfo/get","/api/user/addressbook/accountAndOrderEmail/get","/api/orders/base/queryAddressInfo/query","/api/user/addressbook/universalCountryList/get","/api/user/addressbook/addressFormConfigByInfo/get","/api/user/addressbook/limitAddr/query","/api/coupon/getCouponPackage/init","/api/coupon/bindCouponPackage/update","/api/coupon/getCouponRemind/init"];var g=r(665640);function h(e,t={}){var r;"undefined"!=typeof window&&(null===(r=window.TPM)||void 0===r||r.run({marketing:"ClientAnalytics",method:"_defineTrack",params:{data:e,options:t}}))}function m(e){const t=function(e){if("undefined"==typeof window||!window.AntiIn)return"";if(!gbCommonInfo.SYNC_ANTIIN_URLS.some((t=>e.includes(t))))return"";const t=window.AntiIn;return t._last?t._last:(t._calculating=t.syncGetAllEncrypted(t.Channel.PC),t._last=t._calculating,setTimeout((()=>t._last=void 0),200),t._calculating)}(e.url)||"",r={};return t&&(r["Anti-In"]=t),e.headers=Object.assign(r,e.headers),e}async function v(e){const t=await async function(e){if("undefined"==typeof window||!window.AntiIn)return"";if(!gbCommonInfo.ANTIIN_URLS.some((t=>e.includes(t))))return"";const t=window.AntiIn;return t._last?t._last:(t._calculating||(t._calculating=t.getAllEncrypted(t.Channel.PC).then((e=>(t._calculating=null,setTimeout((()=>t._last=void 0),200),t._last=e))).catch((()=>""))),await t._calculating)}(e.url)||"",r={};return t&&(r["Anti-In"]=t),e.headers=Object.assign(r,e.headers),e}let _=!0;async function y(e){var t,r;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;e.customdata||(e.customdata={});let o=u().getUri(e);if(o.startsWith("http")){if(!o.startsWith(location.origin))return e;o=o.replace(location.origin,"")}let n="";const i=Date.now();if(e.customdata.requestStartTime=i,e.customdata.subUrl=null===(t=o.split("?"))||void 0===t?void 0:t[0],e.customdata.sigUrl=o,null===(r=gbCommonInfo)||void 0===r||!r.OPEN_SIGNATURE)return e;try{n=await window._SHEIN_CALC_SIGNATURE_(o);let e="signature_compute_time";_&&(_=!1,e="signature_compute_time_first"),h({data:[{key_path:e,values:{num:100*(Date.now()-i)}}]},{random:.05})}catch(e){var s,a,l;if("undefined"!=typeof window&&"undefined"!=typeof gbCommonInfo)window.ErrorJs.sendError("error",`${null===(s=gbCommonInfo)||void 0===s||null===(a=s.REPORT_URL)||void 0===a?void 0:a.SA_REPORT_URL}/unusual`,{errorMark:"signature_compute_error",errorInfo:{stack:null==e?void 0:e.stack,message:null==e?void 0:e.message,sigFileName:null===(l=gbCommonInfo)||void 0===l?void 0:l.SIG_FILE_NAME,sigUrl:o}})}return e.headers["x-gw-auth"]=n,e}function I(e){var t,r;const o=Number(null==e||null===(t=e.data)||void 0===t?void 0:t.code),n=Number(null==e||null===(r=e.data)||void 0===r?void 0:r.sub_code);return 836e3===o&&5501===n&&location.reload(),e}let w=!1;function b(e){var t;return[/\/api\/user\/wishlist(?!\/((check\/good)|(group\/optional\/goods\/get)|(redpoint\/get)))/].some((t=>t.test(e.config.url)))&&void 0!==(null===(t=e.data)||void 0===t?void 0:t.code)&&(-4!=+e.data.code&&-2!=+e.data.code||(w||(w=!0,(0,i.L)({message:gbCommonInfo.language.SHEIN_KEY_PC_17753,type:"none",offset:186,onClose:()=>w=!1})),e.data.code=-1,e.data.originCode=-4)),e}function R(e){var t;if(null!==(t=e.config.schttp)&&void 0!==t&&t.needLogin&&e.data&&(300206==+e.data.code||"need login"===e.data.msg||"00101110"==e.data.code)){try{Promise.all([r.e(89740),r.e(70827),r.e(64470)]).then(r.bind(r,564470)).then((({removeAuthUserInfo:e})=>{e()})).catch((e=>{g.log("forceLogin:"+e)}))}catch(e){g.log(e+"")}location.href=gbCommonInfo.langPath+"/user/logout"}return e}const C={success:function(e){var t,r,o,i,a,l,u,c,d,m;if(null!=e&&null!==(t=e.config)&&void 0!==t&&null!==(r=t.schttp)&&void 0!==r&&r.apiLogSkip)return e;if((null==e||null===(o=e.config)||void 0===o||null===(i=o.customdata)||void 0===i?void 0:i.requestStartTime)>0){var v,_,y,I,w;const t=Date.now()-((null==e||null===(v=e.config)||void 0===v||null===(_=v.customdata)||void 0===_?void 0:_.requestStartTime)||0);!function(e,{responseTime:t}){f.some((t=>t===e))&&p.JY.metricTime({metric_name:"web_request_duration",tags:{path:e},value:t},{random:.05})}((null==e||null===(y=e.config)||void 0===y?void 0:y.url)||"other",{responseTime:t}),h({resource:(null==e||null===(I=e.config)||void 0===I||null===(w=I.customdata)||void 0===w?void 0:w.subUrl)||"other",data:[{key_path:"request_time",values:{num:t}}]},{random:.05})}try{var b,R,C,k,S,E,A;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;let t=navigator.userAgent;if(t&&t.includes("bot"))return e;const{USER_AGENT_BLACK_LIST:r=[]}=gbCommonInfo;if(r.includes(t))return e;const o=null!=e&&null!==(b=e.config)&&void 0!==b&&b.useBffApi?"bff_api_res_code_error":"api_res_code_error",n=null==e||null===(R=e.config.customdata)||void 0===R?void 0:R.subUrl;var P,T,N;if(null!=(null===(C=e.data)||void 0===C?void 0:C.code)&&"0"!=e.data.code&&836100!=e.data.code)p.JY.metricCount({metric_name:o,tags:{siteuid:null===(P=gbCommonInfo)||void 0===P?void 0:P.SiteUID,errorCode:e.data.code,apiUrl:null===(T=e.config.customdata)||void 0===T?void 0:T.subUrl,hostname:location.hostname},message:(null===(N=e.data)||void 0===N?void 0:N.msg)||`${n}请求非0错误`},{immediate:!0});const i=null==e||null===(k=e.headers)||void 0===k||null===(S=k["site-uid"])||void 0===S?void 0:S.trim();if(!i||null===(E=gbCommonInfo)||void 0===E||!E.SiteUID)return e;var L,U,q;if(i!==(null===(A=gbCommonInfo)||void 0===A?void 0:A.SiteUID))p.JY.metricCount({metric_name:"bff_site_error",tags:{siteuid:null===(L=gbCommonInfo)||void 0===L?void 0:L.SiteUID,bffSiteuid:i||"other",apiUrl:(null===(U=e.config)||void 0===U||null===(q=U.customdata)||void 0===q?void 0:q.subUrl)||"other",hostname:location.hostname},message:"bff返回站点与当前请求站点不一致"},{immediate:!0})}catch(e){g.error(e)}try{if(n.A.sendReportForScHttp(e),!0==(836e3===Number(null==e||null===(a=e.data)||void 0===a?void 0:a.code)))h({resource:(null==e||null===(l=e.config)||void 0===l||null===(u=l.customdata)||void 0===u?void 0:u.subUrl)||"other",data:[{key_path:"request_error_signature",values:{status_code:String(s[Number(null==e||null===(c=e.data)||void 0===c?void 0:c.sub_code)]||0),info:{message:null==e||null===(d=e.config)||void 0===d||null===(m=d.customdata)||void 0===m?void 0:m.sigUrl}}}]},{immediate:!0})}catch(e){g.log(e)}try{var x,O;const t=null==e||null===(x=e.data)||void 0===x?void 0:x.code,r=null==e||null===(O=e.headers)||void 0===O?void 0:O["risk-id"];if(836100==t&&r){var G,J,D,j,$,V,M,F,B;const t={page_name:"page_risk_crawler_block",page_id:6407};null===(G=window)||void 0===G||G.sa("set","setPageData",t);const o=(null===(J=window)||void 0===J||null===(D=J.AntiIn)||void 0===D?void 0:D.syncGetAllEncrypted(null===(j=window)||void 0===j?void 0:j.AntiIn.Channel.PC))||null,n=encodeURIComponent(null==e||null===($=e.request)||void 0===$?void 0:$.responseURL),i=(null===(V=window)||void 0===V?void 0:V.__ArmorToken)||(null===(M=window)||void 0===M?void 0:M.sessionStorage.getItem("armorToken"))||(null===(F=window)||void 0===F?void 0:F.localStorage.getItem("armorToken"))||null;null===(B=window)||void 0===B||B.sa("send",{activity_name:"expose_risk_envinfo",activity_param:{origin_risk_id:r,anti_in:o,armortoken:i,risk_url:n,response:null==e?void 0:e.data}})}}catch(e){g.log(e)}return e},error:function(e){if(void 0!==(null==e?void 0:e.request)){var t,r,o;n.A.sendReportForScHttp(e),h({resource:(null==e||null===(t=e.config)||void 0===t||null===(r=t.customdata)||void 0===r?void 0:r.subUrl)||"other",data:[{key_path:"request_error",values:{status_code:`10010${null==e||null===(o=e.request)||void 0===o?void 0:o.status}`}}]},{immediate:!0});try{var i,s,a,l,u;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)throw e;let t=navigator.userAgent;if(t&&t.includes("bot"))throw e;const{USER_AGENT_BLACK_LIST:r=[]}=gbCommonInfo;if(r.includes(t))throw e;const o=(null==e||null===(i=e.response)||void 0===i?void 0:i.status)||0;if(+o<1)throw e;const n=null!=e&&null!==(s=e.config)&&void 0!==s&&s.useBffApi?"bff_api_request_status_error":"api_request_status_error";p.JY.metricCount({metric_name:n,tags:{siteuid:null===(a=gbCommonInfo)||void 0===a?void 0:a.SiteUID,apiUrl:(null==e||null===(l=e.config)||void 0===l||null===(u=l.customdata)||void 0===u?void 0:u.subUrl)||"other",errorCode:o,hostname:location.hostname},message:null==e?void 0:e.message},{immediate:!0})}catch(e){g.error(e)}}try{var c,d,f;const t=null==e||null===(c=e.response)||void 0===c?void 0:c.status,r=null==e||null===(d=e.response)||void 0===d||null===(f=d.headers)||void 0===f?void 0:f["risk-id"];if(403==t&&r){var m,v,_,y,I,w,b,R,C,k;const t={page_name:"page_risk_crawler_block",page_id:6407};null===(m=window)||void 0===m||m.sa("set","setPageData",t);const o=(null===(v=window)||void 0===v||null===(_=v.AntiIn)||void 0===_?void 0:_.syncGetAllEncrypted(null===(y=window)||void 0===y?void 0:y.AntiIn.Channel.PC))||null,n=encodeURIComponent(null==e||null===(I=e.request)||void 0===I?void 0:I.responseURL),i=(null===(w=window)||void 0===w?void 0:w.__ArmorToken)||(null===(b=window)||void 0===b?void 0:b.sessionStorage.getItem("armorToken"))||(null===(R=window)||void 0===R?void 0:R.localStorage.getItem("armorToken"))||null;null===(C=window)||void 0===C||C.sa("send",{activity_name:"expose_risk_envinfo",activity_param:{origin_risk_id:r,anti_in:o,armortoken:i,risk_url:n,response:null==e||null===(k=e.response)||void 0===k?void 0:k.data}})}}catch(e){g.log(e)}throw e}},k={name:"rewriteSignature",active:()=>gbCommonInfo.OPEN_SIGNATURE&&("gray"===gbCommonInfo.NODE_SERVER_ENV||"production"===gbCommonInfo.NODE_SERVER_ENV),range:()=>!0,check:({data:e})=>836e3==(null==e?void 0:e.code)&&5511==(null==e?void 0:e.sub_code),fix:()=>window._SHEIN_SYNC_TIMESTAMP_(gbCommonInfo.langPath+"/_openapi_gateway_/timestamp")},S={name:"geetest",active:()=>!0,range:({url:e})=>[/\/cart\/update/,/\/cart\/add_mall/,/\/api\/comment\/abcCommentImages\/query/,/\/api\/comment\/abcCommentInfo\/query/,/\/goods_detail_nsw\/getCommentByAbc/,/\/goods_detail_nsw\/getCommentInfoByAbc/].some((t=>t.test(e))),check:({data:e})=>{var t;return 836100==(null==e?void 0:e.code)&&(null==e?void 0:e.sub_code)&&(null==e||null===(t=e.attachment)||void 0===t?void 0:t.cookie_duration)},fix:({data:e})=>(0,a.lt)(e.sub_code,e.attachment.cookie_duration).then((e=>{if("success"!==e.status)throw"geetest_close"!==e.status&&(0,i.L)({type:"error",message:gbCommonInfo.language.SHEIN_KEY_PC_16509}),e}))};const E=new class{constructor(e){(0,o.A)(this,"replayQueue",{}),(0,o.A)(this,"plugins",[]),(0,o.A)(this,"_seed",9999),"undefined"!=typeof window&&"undefined"!=typeof gbCommonInfo&&(e.forEach((({name:e,active:t,range:r,check:o,fix:n})=>{"string"==typeof e&&"function"==typeof t&&"function"==typeof r&&"function"==typeof o&&"function"==typeof n&&t()&&this.plugins.push({pluginName:e,range:r,check:o,fix:n,groupId:0})})),this.interceptor={hold:this._hold.bind(this),replay:e=>t=>this._replay(t,e)})}async _hold(e){return e.customdata||(e.customdata={}),e.customdata.groupId={},await Promise.all(this.plugins.map((async t=>{t.range(e)&&await t.holdingPromise,e.customdata.groupId[t.pluginName]=t.groupId}))),e}async _replay(e,t){var r,o;const n=null===(r=e.config)||void 0===r||null===(o=r.customdata)||void 0===o?void 0:o.groupId;if(!n)return e;const i=e.config.headers["x-gw-replay"];if(i)throw this.replayQueue[i](e),delete this.replayQueue[i],new Error("abandon from replay");let s=!0,a=!1;if(await Promise.all(this.plugins.map((async t=>{if(t.check(e)){s=!1;await this._doFix(e,n,t)||(a=!0)}}))),s||a)return e;const l=this._createUniqueId(),u=this._saveQueue(l);return t(this._resetConfig(l,e.config)).catch((e=>g.log("replay success: ","abandon from replay"===e.message))),u}async _doFix(e,t,r){return t[r.pluginName]!==r.groupId||r.holdingPromise?r.holdingPromise:r.holdingPromise=(async()=>{let t=!0;try{await r.fix(e)}catch(e){g.error(e),t=!1}return r.groupId++,delete r.holdingPromise,t})()}_createUniqueId(){return this._seed<1e3&&(this._seed=9999),this._seed--}_saveQueue(e){let t=null;const r=new Promise((e=>t=e));return this.replayQueue[e]=t,r}_resetConfig(e,t){return t.headers["x-gw-replay"]=e,delete t.headers["x-gw-auth"],delete t.headers["x-csrf-token"],t}}([k,S]).interceptor,A={_getRandomString(e,t="0123456789"){let r="";for(let o=e;o>0;--o)r+=t[Math.floor(Math.random()*t.length)];return r},_getRootSpanInfo(){const{_getRandomString:e}=A,t=`ff${e(14,"0123456789abcdef")}`.toString();return{traceID:t,spanID:t}},_sampleControlConfig:null,_getSampleRate(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return 0;if(["localhost","debug","gray"].includes(gbCommonInfo.NODE_SERVER_ENV))return 1;let t=null;if(A._sampleControlConfig){const{value:e,end:r}=A._sampleControlConfig;t=e,Date.now()>r&&(A._sampleControlConfig=null)}else{const e=(0,c.getLocalStorage)("sky_eye_sample_control_config");e&&(t=e,A._sampleControlConfig={value:e,end:Date.now()+18e5})}if(t){var r;const o=null===(r=t.apiMap)||void 0===r?void 0:r[e.url];return o?Number(o.prop):Number(t.prop)||.001}return"/api/config/sampleControlConfig/get"!==e.url&&(0,d.u)(),.001},_getSampleFlag(e){const{_getSampleRate:t}=A;return Math.random()<t(e)?1:0},startRootSpan(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const{_getRootSpanInfo:t,_getSampleFlag:r}=A,{traceID:o}=t(),n=r(e);return e.headers["uber-trace-id"]=`${o}:${o}:0:${n}`,e},_buildTraceSpanData(e,t){var r,o,n,i,s;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo||!e||!t)return null;const{headers:a={},customdata:l={},method:u,url:c=""}=e,d=(null==a?void 0:a["uber-trace-id"])||"",[p="",,,f]=(null==d||null===(r=d.split)||void 0===r?void 0:r.call(d,":"))||[];if("1"!==f)return null;const g=null==l?void 0:l.requestStartTime,h=Date.now()-(g||0),{page_name:m}=window.getSaPageInfo||window.SaPageInfo||{},v=`${A._getSampleRate(e)}`,_="1"===v?"cons":"probabilistic",{headers:y}=t,I=(null==y?void 0:y["x-tracer-name"])||(null==c||null===(o=c.split)||void 0===o||null===(n=o.call(c,"?"))||void 0===n?void 0:n[0])||"/",{IS_RW:w,SERVER_TYPE:b="",NODE_SERVER_ENV:R=""}=gbCommonInfo,C=`${w?"romwe":"shein"}-PC-${b}-${R}`;return{traceID:p,spanID:p,parentID:"",startTime:g,duration:h,operationName:I,api:I,url:c||"",method:(null===(i=(s=u||"").toUpperCase)||void 0===i?void 0:i.call(s))||"",statusCode:t.status||504,ID:"fdf304b4-9e52-56e1-b9be-159baeafb0b9",host:C,page:m,authName:"",samplerType:_,samplerParam:v,spanKind:"client"}},success(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const{headers:t,config:r}=e||{};if(!t||!r)return e;if(null!=t&&t["x-recognize-cache"])return e;const o=A._buildTraceSpanData(r,e);return o?(h({data:[{key_path:"trace-span",values:{span_info:JSON.stringify(o)}}]},{random:1}),e):e},error(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)throw e;const{config:t,response:r}=e||{};if(!t)throw e;const{headers:o}=r||{};if(null!=o&&o["x-recognize-cache"])throw e;const n=A._buildTraceSpanData(t,r);if(!n)throw e;throw h({data:[{key_path:"trace-span",values:{span_info:JSON.stringify(n)}}]},{random:1}),e}};function P(e){if("undefined"!=typeof window){const t=e.headers,r=t["Client-Ipver"]||t["client-ipver"]||(null!=t&&t.get?null==t?void 0:t.get("Client-Ipver"):"")||"",o=t["Client-Ipaddr"]||t["client-ipaddr"]||(null!=t&&t.get?null==t?void 0:t.get("Client-Ipaddr"):"")||"";r&&(window.__CLIENT_IPVER__=r),o&&(window.__CLIENT_IPADDR__=o)}return e}function T(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;if(e.useBffApi){const{langPath:t="",WEB_VERSION:r}=gbCommonInfo;if(e.baseURL=`${t}/bff-api`,e.headers.webVersion=r,["debug","localhost","gray"].includes(gbCommonInfo.NODE_SERVER_ENV)){const{bffEnv:t}=gbCommonInfo;e.headers["bff-env"]=t,e.headers.sheindebug="676"}}return e}},324792:function(e,t,r){var o=r(98544),n=r.n(o),i=r(665640);const s=[],a=[];function l(e){try{s.forEach((t=>e.interceptors.request.use(...t))),a.forEach((t=>e.interceptors.response.use(...t)))}catch(e){i.error("assignInterceptors error",e)}return e}"undefined"!=typeof window&&(n()._create=n().create,n().create=function(e){return l(n()._create(e))},l(n())),t.A=n()}}]);
//# sourceMappingURL=49811-4cea834e328f7618.js.map